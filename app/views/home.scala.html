@(inboxLinkPartial: Html,
  userResearchLinkUrl: Option[String],
  incomeCards: Seq[Html],
  benefitCards: Seq[Html],
  pensionCards: Seq[Html]
)(implicit pertaxContext: PertaxContext, messages: play.api.i18n.Messages)

@import tags._
@import uk.gov.hmrc.play.views.formatting.Money.pounds
@import models.PertaxUser
@import models.PertaxUser._
@import pertaxContext.configDecorator._

@main(Messages("label.your_personal_tax_account"),Some(Messages("label.your_personal_tax_account"))) {

  @userResearchLinkUrl.map { userResearchLinkUrl =>

    <div class="page-heading no-padding-bottom no-border">
      <h1 class="heading-xlarge no-margin-bottom">
        @ifNameAvailable {
          @pertaxContext.user.flatMap(_.name.map(upperCaseToTitleCase))
        }
        @unlessNameAvailable {
          @Messages("label.your_account")
        }
      </h1>
    </div>

    <div class="notice-banner">
      <div class="notice-banner__wrapper">
        <h3 class="notice-banner__content">@Messages("label.we_want_to_make_this_website_easier_to_use")</h3>
        <a class="notice-banner__content trackLink" href="@userResearchLinkUrl" target="_blank">@Messages("label.help_us_with_our_research_opens_in_new_window")</a>
      </div>
    </div>

  }.getOrElse {

    <div class="page-header home" role="heading">
      <div class="page-info">Account home</div>
      <h1 class="heading-xlarge no-margin-top no-margin-bottom">
        @ifNameAvailable {
          @pertaxContext.user.flatMap(_.name.map(upperCaseToTitleCase))
        }
        @unlessNameAvailable {
          @Messages("label.your_account")
        }
      </h1>
    </div>

  }

  <div class="grid-row pertax-home">
    <div class="column-two-thirds" role="main">

      <section>
        <h2 class="section-header">@Messages("title.income")</h2>
        <div class="grid-row">
          @incomeCards
        </div>
      </section>

      <section>
        <h2 class="section-header">@Messages("label.child_benefit_and_tax_credits")</h2>
        <div class="grid-row">
          @benefitCards
        </div>
      </section>

      <section>
        <h2 class="section-header">@Messages("label.pension_and_retirement")</h2>
        <div class="grid-row">
          @pensionCards
        </div>
      </section>

    </div>


    <div class="sidebar column-third" role="complementary">
      <h2 class="section-header">@Messages("label.your_account")</h2>

      @ifGovernmentGatewayUser {
        @ifPayeOrSaUser {
          <div class="sidebar-panel messages">
            @inboxLinkPartial
          </div>
        }
      }

      <div class="sidebar-panel">
        <h3 class="no-margin-top">@Messages("label.personal_details")</h3>
        @ifPayeUser {
          <div class="personal-details">
            @ifUserHasPersonDetails {
              <a href="@controllers.routes.AddressController.displayAddress()">@Messages("label.update_your_address")</a>
            }
            @unlessUserHasPersonDetails {
              <p>@Messages("label.you_cant_view_or_update_your_address_right_now")</p>
            }
          </div>
        }

        <div class="manage-paperless">
          <a href="@controllers.routes.PaperlessPreferencesController.managePreferences()">@Messages("label.manage_your_paperless_settings")</a>
        </div>
      </div>

      <div class="sidebar-panel track-forms">
        <h3 class="no-margin-top">@Messages("label.track_your_forms_and_letters")</h3>
        <p>@Messages("label.find_out_how_your_form_or_letter_is_progressing_and_when_you_should_expect_a_response_by")</p>
        <a id="track-form-link" class="trackLink" href="@pertaxContext.configDecorator.formTrackingServiceUrl">@Messages("label.track_your_forms_and_letters")</a>
      </div>

    </div>
  </div>
}
