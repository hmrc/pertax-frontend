@*
 * Copyright 2026 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import controllers.auth.requests.UserRequest
@import models.ClaimMtdFromPtaChoiceFormProvider
@import play.api.mvc.Call
@import uk.gov.hmrc.govukfrontend.views.html.components.{FormWithCSRF, *}
@import views.html.components.{Button, ErrorSummary, InputYesNo}
@import views.MainView

@this(
        mainView: MainView,
        button: Button,
        errorSummary: ErrorSummary,
        inputYesNo: InputYesNo,
        form: FormWithCSRF
)

@(postAction: Call, claimMtdForm: Form[ClaimMtdFromPtaChoiceModel])(implicit request: UserRequest[_], messages: play.api.i18n.Messages)

@defining("https://www.gov.uk/government/publications/extension-of-making-tax-digital-for-income-tax-self-assessment-to-sole-traders-and-landlords/making-tax-digital-for-income-tax-self-assessment-for-sole-traders-and-landlords") { mtdGuidanceUrl =>

    @mainView(
        pageTitle    = messages("label.mtdit.heading"),
        showBackLink = true
    ) {

        @errorSummary(claimMtdForm, Some("mtd-choice-yes"))

        <h1 class="govuk-heading-l govuk-!-margin-bottom-8">
        @messages("label.mtdit.heading")
        </h1>

        <p class="govuk-body">
            @messages("label.mtdit.claim.p1.prefix")
            <a class="govuk-link govuk-link--no-visited-state"
            href="@mtdGuidanceUrl"
            target="_blank"
            rel="noreferrer noopener">
            @messages("label.mtdit.claim.p1.linkText")
            </a>
            @messages("label.mtdit.claim.p1.suffix")
        </p>

        @form(action = postAction) {
            @inputYesNo(
                form = claimMtdForm,
                legend = "label.mtdit.claim.question",
                legendClasses = "govuk-fieldset__legend--m",
                name = "mtd-choice",
                inline = false
            )
            @button(msg="label.continue")
        }
    }
}
