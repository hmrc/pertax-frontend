@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.ConfigDecorator
@import controllers.auth.requests.UserRequest
@import uk.gov.hmrc.renderer.TemplateRenderer

@import scala.concurrent.ExecutionContext

@this(mainView: MainView)

@(redirectUrl: String, nextDeadlineTaxYear: String, isItsa: Boolean, isSa: Boolean, isSeiss: Boolean, taxYear: String, saActionNeeded: SelfAssessmentUserType)(implicit request: UserRequest[_], configDecorator: ConfigDecorator, templateRenderer: TemplateRenderer, messages: play.api.i18n.Messages, ec: ExecutionContext)

@mainView(messages("label.your_self_assessment"), Some(messages("label.your_personal_tax_account"))) {

    <div class="grid-row">
        <div class="column-two-thirds">
            @back_link()

            @if(isItsa) {
                <h1 class="govuk-heading-l govuk-!-margin-bottom-8">@messages("label.itsa_header")</h1>
                <h2 class="govuk-heading-m">@messages("label.mtd_for_sa")</h2>
                <p>@messages("label.send_updates_hmrc_compatible_software")</p>
                <p><a class="ga-track-anchor-click" href="@configDecorator.itsaViewUrl" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="View and manage your Making Tax Digital for Income Tax Self Assessment">@messages("label.view_manage_your_mtd_for_sa")</a></p>
            } else {
                <h1 class="govuk-heading-l govuk-!-margin-bottom-8">@messages("label.your_self_assessment")</h1>
            }

            @if(isSa) {
                @if(isItsa) {
                    <h2 class="govuk-heading-m">@messages("label.self_assessment_tax_returns")</h2>
                }
                @saActionNeeded match {
                    case ActivatedOnlineFilerSelfAssessmentUser(saUtr) => {
                        @if(isItsa) {
                            <p>@messages("label.old_way_sa_returns")</p>

                            <p><a class="ga-track-anchor-click" href="@routes.InterstitialController.displaySelfAssessment" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Access your Self Assessment tax returns">@messages("label.access_your_sa_returns")</a></p>
                        } else {
                            <p>@messages("label.online_returns_deadline", nextDeadlineTaxYear)</p>

            <p><a class="ga-track-anchor-click" href="@routes.InterstitialController.displaySelfAssessment" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="View and manage your Self Assessment tax return">@messages("label.view_manage_sa_return")</a>
            </p>
            <p>  <a class="ga-track-anchor-click" href="@configDecorator.completeYourTaxReturnUrl(saUtr.toString, taxYear, messages.lang)" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Complete your tax return">@messages("label.complete_your_tax_return")</a>
            </p>
            <p>         <a class="ga-track-anchor-click" href="@controllers.routes.PaymentsController.makePayment" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Make a payment">@messages("label.make_a_payment")</a>
            </p>
            <p> <a class="ga-track-anchor-click" href="@configDecorator.viewSaPaymentsUrl(saUtr.value, messages.lang)" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="View your payments">@messages("label.view_your_payments")</a>
            </p>
            <p>  <a class="ga-track-anchor-click" href="https://www.gov.uk/check-if-you-need-a-tax-return" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Check if you need to fill in a tax return">@messages("label.check_if_you_need_to_fill_in_a_tax_return")</a>
            </p>
                        }
                    }
                    case NotYetActivatedOnlineFilerSelfAssessmentUser(saUtr) => {
                        <ul class="govuk-list">
                            <li>
                                <a class="ga-track-anchor-click" href="@controllers.routes.SelfAssessmentController.handleSelfAssessment" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Activate your Self Assessment">@messages("label.activate_your_self_assessment")</a>
                            </li>
                        </ul>
                    }
                    case WrongCredentialsSelfAssessmentUser(saUtr) => {
                        <ul class="govuk-list">
                            <li>
                                <a class="ga-track-anchor-click" href="@controllers.routes.SelfAssessmentController.handleSelfAssessment" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Find out how to access Self Assessment">@messages("label.find_out_how_to_access_self_assessment")</a>
                            </li>
                        </ul>
                    }
                    case NotEnrolledSelfAssessmentUser(saUtr) => {
                        <p>@messages("label.not_enrolled.content")</p>
                        <ul class="govuk-list">
                            <li>
                                <a class="ga-track-anchor-click" href="@controllers.routes.SelfAssessmentController.redirectToEnrolForSa" data-ga-event-category="link - click" data-ga-event-action="Income" data-ga-event-label="Request access to your Self Assessment">@messages("label.not_enrolled.link.text")</a>
                            </li>
                        </ul>
                    }
                    case _ => {}
                }
                @if(!isItsa) {
                    <h2 class="govuk-heading-m">@messages("label.making_tax_digital")</h2>
                    <p>@messages("label.from_date_mtd_service_for_itsa_will_replace_sa_tax_return")</p>

                    <p>@messages("label.some_businesses_agents_using_mtd_for_itsa")</p>

                    <p><a class="ga-track-anchor-click" href="@configDecorator.makingTaxDigitalForIncomeTaxUrl"
                    data-ga-event-category="link - click" data-ga-event-label="Find out about Making Tax Digital for Income Tax Self Assessment"
                    rel="noreferrer noopener" target="_blank">@messages("label.find_out_about_making_tax_digital_for_income_tax_self_assessment")</a></p>
                }
            }

            @if(isSeiss) {
                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
                <h2 class="govuk-heading-m">@messages("title.seiss")</h2>
                <p><a class="trackLink" href="@configDecorator.seissClaimsUrl">@messages("body.seiss")</a></p>
            }

        </div>
    </div>
}
